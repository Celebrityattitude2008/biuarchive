<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal Upgrades | BIU Archive</title>
    <link rel="stylesheet" href="theme.css">
    <script>(function(){try{var t=localStorage.getItem('site-theme')||'dark';document.documentElement.classList.add('theme-'+t);}catch(e){}})();</script>
    <style>
        :root {
            --primary: #002147; --accent: #FFD700; --light: #f8f9fa;
            --white: #ffffff; --text: #333; --premium: #00BFFF;
        }
        [data-theme="dark"] { --primary: #FFD700; --accent: #002147; --light: #121212; --white: #1e1e1e; --text: #f4f4f4; }
        
        /* OFFICIAL BIU DEPARTMENT THEMES */
        [data-theme="emerald"] { --primary: #064e3b; --accent: #34d399; --light: #022c22; --white: #065f46; --text: #ecfdf5; }
        [data-theme="midnight"] { --primary: #1e1b4b; --accent: #818cf8; --light: #020617; --white: #1e1b4b; --text: #f8fafc; }
        [data-theme="crimson"] { --primary: #7f1d1d; --accent: #f87171; --light: #270606; --white: #7f1d1d; --text: #fef2f2; }

        body { font-family: 'Segoe UI', sans-serif; background: var(--light); color: var(--text); margin: 0; padding: 20px; display: flex; justify-content: center; transition: 0.3s; }
        .container { background: var(--white); padding: 2rem; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); width: 100%; max-width: 700px; text-align: center; }
        
        .status-card { padding: 20px; border-radius: 12px; margin-bottom: 25px; border: 2px dashed #ccc; transition: 0.3s; }
        .verified-active { border-color: var(--premium); background: rgba(0, 191, 255, 0.1); border-style: solid; }
        
        .upgrade-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        .feature-card { background: rgba(128,128,128,0.08); padding: 15px; border-radius: 12px; text-align: left; position: relative; opacity: 0.5; transition: 0.3s; border: 1px solid transparent; }
        .feature-card.unlocked { opacity: 1; border-color: var(--premium); background: var(--white); }
        
        .lock-icon { position: absolute; top: 10px; right: 10px; font-size: 18px; }
        .btn { padding: 12px 20px; border: none; border-radius: 25px; cursor: pointer; font-weight: bold; width: 100%; transition: 0.2s; margin-top: 10px; }
        .btn-request { background: var(--primary); color: var(--white); border: 1px solid var(--accent); }
        .btn-back { background: none; color: var(--text); text-decoration: underline; font-size: 12px; border: none; cursor: pointer; margin-bottom: 10px; }
        .premium-text { color: var(--premium); font-weight: bold; }
        .hidden { display: none !important; }

        @media (max-width: 500px) {
            .upgrade-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <div class="container">
        <button class="btn-back" onclick="window.location.href='index.html'">‚Üê Back to Portal</button>
        <h1>üöÄ Scholar Upgrades</h1>
        <p>Unlock the full potential of The BIU Archive.</p>

        <div id="status-box" class="status-card">
            <h3 id="status-title">Status: Standard Member</h3>
            <p id="status-desc">Verify your account to unlock exclusive scholar perks.</p>
            <button id="verify-btn" class="btn btn-request" onclick="window.location.href='profile.html'">Get Verified (‚Ç¶500)</button>
        </div>

        <div class="upgrade-grid">
            <div class="feature-card" id="f1">
                <span class="lock-icon" id="l1">üîí</span>
                <h4 style="margin:0">Bulk Downloads</h4>
                <p style="font-size: 12px;">Access full course packs and zip files for the entire semester.</p>
                <button class="btn btn-request hidden" onclick="window.open('https://bit.ly/BIU-Full-Pack', '_blank')">Download All</button>
            </div>

            <div class="feature-card" id="f2">
                <span class="lock-icon" id="l2">üîí</span>
                <h4 style="margin:0">Verified Badge</h4>
                <p style="font-size: 12px;">A blue checkmark next to your name on the leaderboard and profile.</p>
            </div>

            <div class="feature-card" id="f5">
                <span class="lock-icon" id="l5">üîí</span>
                <h4 style="margin:0">Departmental Themes</h4>
                <p style="font-size: 12px;">Switch between Law (Crimson), Engineering (Emerald), and Science themes.</p>
            </div>

            <div class="feature-card" id="f4">
                <span class="lock-icon" id="l4">üîí</span>
                <h4 style="margin:0">Streak Insurance</h4>
                <p style="font-size: 12px;">Your daily login streak is protected even if you forget to log in.</p>
            </div>

            <div class="feature-card" id="f3">
                <span class="lock-icon" id="l3">üîí</span>
                <h4 style="margin:0">Profile Customization</h4>
                <p style="font-size: 12px;">Add a custom bio, profile picture, and social media links.</p>
            </div>
        </div>

        <p style="margin-top: 30px; font-size: 11px; opacity: 0.7;">Verified status is a lifetime upgrade. Managed by Archive Admin.</p>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBmZDLDyQ2YhMxsYal1q4d0hyr03VXEqak",
            authDomain: "biu-archive.firebaseapp.com",
            databaseURL: "https://biu-archive-default-rtdb.firebaseio.com",
            projectId: "biu-archive"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const userId = localStorage.getItem('biu_user_id');

        // Check user data for Verification and Theme
        if (userId) {
            onValue(ref(db, `users/${userId}`), (snapshot) => {
                const user = snapshot.val();
                if (!user) return;

                // Sync Theme
                if(user.preferredTheme) {
                    document.body.setAttribute('data-theme', user.preferredTheme);
                }

                // If Verified, Unlock everything
                if (user.isVerified) {
                    unlockPremium();
                }
            });
        }

        function unlockPremium() {
            document.getElementById('status-box').classList.add('verified-active');
            document.getElementById('status-title').innerHTML = 'Status: <span class="premium-text">Verified Scholar ‚úîÔ∏è</span>';
            document.getElementById('status-desc').innerText = 'You have full access to all archive features.';
            document.getElementById('verify-btn').classList.add('hidden');

            // Unlock all 5 cards
            const features = ['f1', 'f2', 'f3', 'f4', 'f5'];
            const locks = ['l1', 'l2', 'l3', 'l4', 'l5'];
            
            features.forEach(id => document.getElementById(id).classList.add('unlocked'));
            locks.forEach(id => document.getElementById(id).innerText = 'üîì');
            
            // Show Download Button
            document.querySelector('#f1 .btn').classList.remove('hidden');
        }
    </script>
    <script src="theme.js" defer></script>
</body>
</html>